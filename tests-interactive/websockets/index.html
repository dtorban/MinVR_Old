<html>
<head>
	<meta charset="utf-8">
	<script src="d3.v4.min.js"></script>
</head>
<body>
<input type="text" id="command">
<script>

	var socket = new WebSocket("ws://127.0.0.1:8081", "input");

	d3.select("#command").on("keydown", function() {
		if (d3.event.keyCode == 13) {
			var command = d3.select("#command").node().value;
			socket.send(JSON.stringify({command: command}));
			d3.select("#command").node().value = '';
		}
	});

	var count = 0;

	try {
		socket.onmessage =function got_packet(msg) {
			count++;
			//if (count == 5) {
				image.src = "data:image/jpg;base64," + msg.data;
			//}
		} 
	} catch(exception) {
		alert('<p>Error' + exception);  
	}
</script>
</body>
</html>

